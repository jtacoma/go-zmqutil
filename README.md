# gozmqutil

[ØMQ](http://www.zeromq.org) abstractions for [Go](http://golang.org).

This package aims to implement, first, the [recommended binding abstractions](http://www.zeromq.org/topics:binding-abstractions).

## Status

This project is in early development, the public API may change significantly before 1.0.  It is not yet recommended for use production (though [ØMQ](http://www.zeromq.org) and [gozmq](https://github.com/alecthomas/gozmq) are).

## Building

Build tags are used to distinguish versions of ØMQ.  Version 2.1 is `zmq_2_1`, 2.2 is `zmq_2_x`, and 3.2 is `zmq_3_x`.  If no build tags are specified then the default is 2.2 and this is reflected in the documentation generated by godoc.

## Usage

    import (
        "errors"
        "time"
    
        zmq "github.com/alecthomas/gozmq"
        zmqutil "github.com/jtacoma/gozmqutil"
    )
    
    func main() {
        context := zmqutil.NewContext()
        defer context.Close()
        context.SetLinger(1 * time.Second)
        socket, _ := context.NewSocket(zmq.SUB)
        poller, _ := zmqutil.NewPoller(context)
        poller.HandlFunc(socket, zmq.POLLIN, func (e *zmqutil.SocketEvent) error {
            println(string(msg[0]))
            if (string(msg[0]) == "STOP") {
                e.Fault = errors.New("received 'STOP'")
                println("Stopping...")
            }
        })
        socket.Bind("tcp://localhost:5555")
        poller.Run()
    }

## Implemented Features

### Context

A context remembers its sockets and has its own `Linger` option.  When a context is closed, it will set the `Linger` option on each socket then close them all.

### Socket

All options supported in [gozmq](https://github.com/alecthomas/gozmq) are available here through option-specific getter/setter methods.

### Poller

A reactor loop that lets event handlers be attached to sockets.

## Planned Features

* Bind method that allows "bind to random free port" (and returns resulting port).

## License

Use of this source code is governed by a BSD-style license that can be found in the LICENSE file.
