# zmqutil

Package zmqutil implements some ØMQ (http://www.zeromq.org) abstractions and
utilities.

A context from this package remembers its sockets and has its own Linger
option.  When a context is closed, it will set the Linger option on each
socket that would linger longer and then close them all.

An additonal type, Poller, provides a reactor loop that lets event handlers be
attached to sockets.

	package main
	
	import (
		"log"
		"os"
		"time"
	
		zmq "github.com/alecthomas/gozmq"
		"github.com/jtacoma/go-zmqutil"
	)
	
	func main() {
		logger := log.New(os.Stderr, "", log.LstdFlags|log.Lmicroseconds|log.Lshortfile)
		context := zmqutil.NewContext()
		defer context.Close()
		context.SetLinger(50 * time.Second)
		context.SetLogger(logger)
		socket := context.NewSocket(zmq.PULL)
		poller := zmqutil.NewPoller(context)
		poller.HandleIn(socket, func(m [][]byte) {
			logger.Println("received:", string(m[0]))
			if string(m[0]) == "STOP" {
				poller.Unhandle(socket)
				logger.Println("stopping...")
			}
		})
		socket.MustBind("tcp://*:5555")
		poller.Run()
	}

## Building

Build tags are used to distinguish versions of ØMQ.  Version 2.1 is `zmq_2_1`,
2.2 is `zmq_2_x`, and 3.2 is `zmq_3_x`.  If no build tags are specified then the
default is 2.2 and this is reflected in the documentation generated by godoc.

## Status

This package is in early development and is not widely used so the public API
may change significantly at any time.  Please let me know if you are using this
package in production.

## License

Use of this source code is governed by a BSD-style license that can be found in
the LICENSE file.
